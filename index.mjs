// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import{isPrimitive as e}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-complex-like@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-ndarray-like@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-buffer-dtype@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-buffer@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-broadcast-array@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-ctor@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-shape2strides@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-numel@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-null@esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-keys@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-contains@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-orders@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-dtypes@esm/index.mjs";function w(r,e,t,s){var n,i,d;return n=function(r){var e,t;for(e=[],t=0;t<r.length;t++)e.push(r[t]);return e}(e.shape),0===n.length?(i=o(t,1),d=p(t,i,[],[0],0,s)):(i=o(t,e.length||a(n)),d=p(t,i,n,m(n,s),0,s)),r(e,d),d}function v(r,e){switch(e){case"same":return r;case"float":return"float64"===r||"float32"===r||"generic"===r?r:"float64";default:throw new Error(l("0LP4i",e))}}var x="float";function E(r,e){var t,s,n,i;if(!h(e))return new TypeError(l("invalid argument. Resolution table must be an object. Value: `%s`.",e));for(t=y(r),i=0;i<t.length;i++)if(n=t[i],f(e,n)){if(s=e[n],!u(s)&&!j(s))return new TypeError(l("invalid argument. Resolution table `%s` field value must be either a function or null. Value: `%s`.",n,s));r[n]=s}return null}var P=["same","float"];function T(r,e){return h(e)?f(e,"output_dtype_policy")&&(r.policy=e.output_dtype_policy,!c(P,r.policy))?new TypeError(l("0LP4l","output_dtype_policy",r.policy)):null:new TypeError(l("0LP2h",e))}var L=g(),k=b();function _(r,e){return h(e)?f(e,"dtype")&&(r.dtype=e.dtype,!c(k,r.dtype))?new TypeError(l("0LP4k","dtype",r.dtype)):f(e,"order")&&(r.order=e.order,!c(L,r.order))?new TypeError(l("0LP4k","order",r.order)):null:new TypeError(l("0LP2h",e))}function R(p,m){var a,h,f,u;if(h=E(u={number:null,complex:null,array:null,ndarray:null},p))throw h;if(a={policy:x},arguments.length>1&&(h=T(a,m)))throw h;return r(f=j,"assign",y),f;function j(r,d){var p,m,h,f,j;if(e(r)){if(u.number)return u.number(r);throw new TypeError(l("0LP0O"))}if(t(r)){if(u.complex)return u.complex(r);throw new TypeError(l("0LP0P"))}if(h={},arguments.length>1&&(f=_(h,d)))throw f;if(s(r)){if(null===u.ndarray)throw new TypeError(l("0LP0Q"));return m=h.dtype||v(r.dtype,a.policy),w(u.ndarray,r,m,h.order||r.order)}if(n(r)){if(null===u.array)throw new TypeError(l("0LP0R"));return p=i(r)||"generic",m=h.dtype||v(p,a.policy),j=o(m,r.length),u.array(r.length,r,1,j,1),j}throw new TypeError(l("0LP4h",r))}function y(r,i){var o,p,m;if(s(r)){if(s(i)){if(o=r.shape,p=i.shape,o.length===p.length){for(m=0;m<o.length;m++)if(o[m]!==p[m]){r=d(r,p);break}}else r=d(r,p);return u.ndarray(r,i),i}throw new TypeError(l("0LP0S"))}if(n(r)){if(n(i)){if(i.length!==r.length)throw new RangeError(l("0LP0T"));return u.array(r.length,r,1,i,1),i}throw new TypeError(l("0LP0U"))}if(e(r))throw new TypeError(l("0LP0V"));if(t(r))throw new TypeError(l("0LP0W"));throw new TypeError(l("0LP4h",r))}}export{R as default};
//# sourceMappingURL=index.mjs.map
